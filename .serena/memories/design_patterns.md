# 设计模式和架构决策

## 组件设计模式

### 1. 液态玻璃效果组件 (LiquidGlass)
- 模仿苹果风格的模糊玻璃效果
- 支持鼠标交互和弹性动画
- 可配置的视觉参数（模糊度、饱和度、位移等）
- 使用React.forwardRef支持ref传递

### 2. 图标系统
- 所有图标作为React组件实现
- 统一的IconProps接口
- 支持自定义className和尺寸
- SVG内联实现，便于样式控制

### 3. 页面组件结构
- 每个页面是独立的函数式组件
- 使用Framer Motion处理页面动画
- 响应式布局，移动优先设计

## 样式架构

### 1. 颜色系统
- 语义化颜色变量（brand-primary, brand-accent等）
- RGB格式存储，支持透明度修饰
- 通过CSS自定义属性实现主题切换
- 设计令牌(tokens.json)自动注入

### 2. 背景系统
- 多层背景叠加效果
- 网格纹理 + 渐变 + 光晕装饰
- 固定背景，内容滚动

### 3. 动画系统
- Tailwind动画类 + Framer Motion
- 统一的缓动函数
- 性能优化的动画实现

## 路由架构
- 基于React Router v6
- 扁平化路由结构
- ScrollToTop组件确保页面切换时滚动重置
- 课程相关页面归类到/course子路由

## 数据流模式
- 组件内部状态使用useState
- 复杂状态使用useReducer
- 动画状态使用Framer Motion的useAnimation
- 避免过度抽象和全局状态

## 自动化系统架构

### 1. 流水线设计
- 串行执行，每个阶段依赖前一阶段
- 状态机管理流程状态
- 锁机制防止并发冲突

### 2. Gate机制
- 三道质量关卡（架构、主题、发布）
- 人工审核与自动化结合
- 可回滚的状态管理

### 3. 文件组织
```
courses/<course-id>/
├── course.md          # 输入：课程内容
├── palette.txt        # 输入：配色方案
└── .run/              # 运行时数据
    ├── run.json       # 状态跟踪
    ├── artifacts/     # 生成的产物
    └── logs/          # 过程日志
```

## 性能优化策略
1. 组件懒加载（按需实现）
2. 图片优化和懒加载
3. CSS优化（Tailwind purge）
4. 避免不必要的重渲染

## 无障碍设计
1. 语义化HTML
2. ARIA标签支持
3. 键盘导航支持
4. 对比度符合WCAG标准
5. 屏幕阅读器友好

## 扩展性考虑
1. 模块化组件设计
2. 配置驱动的页面生成
3. 主题系统支持多配色方案
4. 脚本化的自动化流程